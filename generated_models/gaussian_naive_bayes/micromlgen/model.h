#pragma once
#include <stdarg.h>
namespace Eloquent {
    namespace ML {
        namespace Port {
            class GaussianNB {
                public:
                    /**
                    * Predict class for features vector
                    */
                    int predict(float *x) {
                        float votes[5] = { 0.0f };
                        float theta[50] = { 0 };
                        float sigma[50] = { 0 };
                        theta[0] = 0.257504509922; theta[1] = 0.250107454863; theta[2] = -0.160250645341; theta[3] = -0.122809491876; theta[4] = 0.490052293976; theta[5] = -0.052660522141; theta[6] = 0.09678840422; theta[7] = -0.23368885749; theta[8] = -0.214990474492; theta[9] = 0.107585750015; theta[10] = -0.201647993862; theta[11] = -0.227086744141; theta[12] = 0.210753187986; theta[13] = 0.248000042615; theta[14] = -0.157981481436; theta[15] = -0.071917442726; theta[16] = 0.447522037974; theta[17] = -0.059159364026; theta[18] = -0.021091729676; theta[19] = -0.049846870091; theta[20] = 0.026049713726; theta[21] = 0.031050545693; theta[22] = -0.084525319522; theta[23] = 0.002529615163; theta[24] = -0.030192426574; theta[25] = -0.05797779612; theta[26] = 0.007453584764; theta[27] = 0.042355607743; theta[28] = -0.081645237425; theta[29] = -0.00029262456; theta[30] = -0.000960865808; theta[31] = 0.02524023439; theta[32] = -0.013023702422; theta[33] = -0.011456392755; theta[34] = -0.004522107121; theta[35] = 0.073126738532; theta[36] = -0.013378588104; theta[37] = 0.010246923627; theta[38] = -0.035344842788; theta[39] = 0.008366693228; theta[40] = -0.004137442822; theta[41] = 0.045794949302; theta[42] = -0.453945754909; theta[43] = -0.536151860944; theta[44] = -0.449489540259; theta[45] = -0.553961358583; theta[46] = -0.292265856107; theta[47] = -0.292278878846; theta[48] = -0.270383089234; theta[49] = -0.364832468525;
                        sigma[0] = 0.872863931017; sigma[1] = 0.514730248749; sigma[2] = 0.972660531756; sigma[3] = 0.830911344738; sigma[4] = 0.27003719009; sigma[5] = 1.144831005331; sigma[6] = 1.085212420571; sigma[7] = 0.528606611144; sigma[8] = 0.898061722592; sigma[9] = 1.057244637504; sigma[10] = 0.857296804468; sigma[11] = 0.930057133736; sigma[12] = 0.882689993027; sigma[13] = 0.508751824313; sigma[14] = 0.946255416357; sigma[15] = 0.894367219737; sigma[16] = 0.292074741347; sigma[17] = 1.107677906769; sigma[18] = 0.387176436338; sigma[19] = 0.165013554499; sigma[20] = 0.314444681203; sigma[21] = 0.374379513811; sigma[22] = 0.091803112924; sigma[23] = 0.270423025836; sigma[24] = 0.381389332005; sigma[25] = 0.176338608148; sigma[26] = 0.209556135356; sigma[27] = 0.296858290554; sigma[28] = 0.103269162529; sigma[29] = 0.274298130925; sigma[30] = 0.605294934699; sigma[31] = 0.258666661984; sigma[32] = 0.265568574564; sigma[33] = 0.862064319599; sigma[34] = 0.186456015844; sigma[35] = 0.421385697836; sigma[36] = 0.677207723862; sigma[37] = 0.299559411668; sigma[38] = 0.344295489736; sigma[39] = 0.584508101167; sigma[40] = 0.194748139186; sigma[41] = 0.587118716814; sigma[42] = 0.31115401264; sigma[43] = 0.243506455387; sigma[44] = 0.27710617708; sigma[45] = 0.225915181766; sigma[46] = 0.428592946986; sigma[47] = 0.554738565607; sigma[48] = 0.492602456142; sigma[49] = 0.471287556768;
                        votes[0] = 0.288753799392 - gauss(x, theta, sigma);
                        theta[0] = -0.35582197449; theta[1] = -0.409939336921; theta[2] = 0.245082609137; theta[3] = -0.210841447089; theta[4] = -0.06590978962; theta[5] = 0.240239584313; theta[6] = -0.257144163896; theta[7] = 0.14074700156; theta[8] = 0.403478912487; theta[9] = -0.298799129887; theta[10] = 0.057106214206; theta[11] = 0.412039567998; theta[12] = -0.333256977127; theta[13] = -0.400278167339; theta[14] = 0.281651100786; theta[15] = -0.269428511287; theta[16] = -0.046943457296; theta[17] = 0.279600392369; theta[18] = 0.008441915757; theta[19] = -0.009220190988; theta[20] = -0.054280622049; theta[21] = -0.003986435955; theta[22] = -0.079792337612; theta[23] = -0.114689586375; theta[24] = 0.026934889051; theta[25] = -0.050294870721; theta[26] = -0.022472266335; theta[27] = 0.003850990342; theta[28] = -0.07385386059; theta[29] = -0.115577617947; theta[30] = -0.017134348124; theta[31] = 0.033064034281; theta[32] = -0.032509316621; theta[33] = 0.034012590864; theta[34] = 0.018682882774; theta[35] = -0.056371569508; theta[36] = 0.021300809958; theta[37] = 0.049005838064; theta[38] = -0.042540848674; theta[39] = -0.023612305411; theta[40] = 0.014185776351; theta[41] = -0.029052370506; theta[42] = -0.36566279277; theta[43] = -0.497478110441; theta[44] = -0.307410196339; theta[45] = -0.461819194543; theta[46] = -0.263734772366; theta[47] = -0.379601735682; theta[48] = -0.209886218804; theta[49] = -0.311628951955;
                        sigma[0] = 0.877249322648; sigma[1] = 1.030414984597; sigma[2] = 0.660178445205; sigma[3] = 1.280655128151; sigma[4] = 0.720682887765; sigma[5] = 0.674418401533; sigma[6] = 0.987745067224; sigma[7] = 1.347791179612; sigma[8] = 0.766044701506; sigma[9] = 0.994487017099; sigma[10] = 1.225259654429; sigma[11] = 0.730967506136; sigma[12] = 0.949911572456; sigma[13] = 1.104721744925; sigma[14] = 0.639331437594; sigma[15] = 1.184867384918; sigma[16] = 0.748353748226; sigma[17] = 0.676248117012; sigma[18] = 0.292527818565; sigma[19] = 0.163672417109; sigma[20] = 0.323442305187; sigma[21] = 0.198566105362; sigma[22] = 0.167282433913; sigma[23] = 0.660094600069; sigma[24] = 0.403215152226; sigma[25] = 0.19414581348; sigma[26] = 0.486857749739; sigma[27] = 0.192938242699; sigma[28] = 0.166053603302; sigma[29] = 0.57966654116; sigma[30] = 0.762295127502; sigma[31] = 0.32446861357; sigma[32] = 0.233849115955; sigma[33] = 0.211166950716; sigma[34] = 0.404435307135; sigma[35] = 0.79688422668; sigma[36] = 0.70420907025; sigma[37] = 0.555309436783; sigma[38] = 0.517532140927; sigma[39] = 0.332105366725; sigma[40] = 0.49272368237; sigma[41] = 0.650485905906; sigma[42] = 0.213887783462; sigma[43] = 0.305162430458; sigma[44] = 0.29986483062; sigma[45] = 0.263176777623; sigma[46] = 0.519832163596; sigma[47] = 0.449936693579; sigma[48] = 0.664093023191; sigma[49] = 0.520411134276;
                        votes[1] = 0.096251266464 - gauss(x, theta, sigma);
                        theta[0] = -0.112712742817; theta[1] = 0.174347099055; theta[2] = 0.19320077856; theta[3] = 0.004660710347; theta[4] = 0.194604477954; theta[5] = 0.191020742142; theta[6] = -0.067213090549; theta[7] = 0.209380658355; theta[8] = 0.21771170752; theta[9] = -0.096073014083; theta[10] = 0.181911025174; theta[11] = 0.219720506362; theta[12] = -0.099291992183; theta[13] = 0.189048083897; theta[14] = 0.199707423685; theta[15] = -0.025049850297; theta[16] = 0.205806041921; theta[17] = 0.211917414651; theta[18] = 0.150022387911; theta[19] = 0.255000454719; theta[20] = 0.088834847648; theta[21] = -0.10944246122; theta[22] = 0.416775174356; theta[23] = 0.196858731307; theta[24] = 0.1528005933; theta[25] = 0.244029633635; theta[26] = 0.090780057597; theta[27] = -0.095018769311; theta[28] = 0.410226426142; theta[29] = 0.155761333502; theta[30] = 0.010948391483; theta[31] = 0.025414230741; theta[32] = -0.006909255686; theta[33] = -0.006845390357; theta[34] = 0.096214560864; theta[35] = 0.000672403226; theta[36] = 0.04730642084; theta[37] = 0.033594586773; theta[38] = 0.022399903935; theta[39] = -0.003245813606; theta[40] = 0.063074471955; theta[41] = -0.06037164201; theta[42] = 0.123055993054; theta[43] = 0.238241427761; theta[44] = 0.110592437439; theta[45] = 0.199317469455; theta[46] = 0.057453619798; theta[47] = 0.058029599143; theta[48] = 0.010044301587; theta[49] = 0.058495531286;
                        sigma[0] = 1.026849367932; sigma[1] = 0.937452783138; sigma[2] = 0.88108942427; sigma[3] = 0.815502947031; sigma[4] = 0.731616667884; sigma[5] = 0.846149086527; sigma[6] = 0.895771632012; sigma[7] = 1.339632239147; sigma[8] = 0.936919819956; sigma[9] = 0.929834154113; sigma[10] = 1.037070543813; sigma[11] = 0.913536010146; sigma[12] = 1.021111328591; sigma[13] = 0.911816368249; sigma[14] = 0.86510617304; sigma[15] = 0.832550915188; sigma[16] = 0.713033781521; sigma[17] = 0.84178194202; sigma[18] = 1.08399979008; sigma[19] = 0.663408422392; sigma[20] = 1.9253690851; sigma[21] = 1.319658274043; sigma[22] = 1.099629121588; sigma[23] = 1.456323386314; sigma[24] = 1.204466406773; sigma[25] = 0.597188189053; sigma[26] = 1.789034090996; sigma[27] = 1.254953474405; sigma[28] = 0.981089148266; sigma[29] = 1.399353006484; sigma[30] = 0.953811966793; sigma[31] = 0.495940615164; sigma[32] = 3.078595078913; sigma[33] = 1.156784862944; sigma[34] = 1.032819839668; sigma[35] = 0.919128418489; sigma[36] = 0.906342744796; sigma[37] = 0.480624612392; sigma[38] = 2.308269034685; sigma[39] = 1.195428398851; sigma[40] = 0.717284231081; sigma[41] = 1.145072505316; sigma[42] = 0.959727294701; sigma[43] = 1.110954905813; sigma[44] = 0.931018469123; sigma[45] = 1.017080009713; sigma[46] = 1.186244408514; sigma[47] = 1.026899466179; sigma[48] = 0.997631781857; sigma[49] = 0.844694098704;
                        votes[2] = 0.209726443769 - gauss(x, theta, sigma);
                        theta[0] = -0.03828635848; theta[1] = 0.21015480076; theta[2] = 0.123112413812; theta[3] = 0.057739026365; theta[4] = 0.084012663244; theta[5] = 0.037087522884; theta[6] = 0.013901150068; theta[7] = 0.139680328402; theta[8] = 0.058071488154; theta[9] = 0.039931968746; theta[10] = 0.11292229429; theta[11] = 0.055091440267; theta[12] = -0.01893694554; theta[13] = 0.204880146391; theta[14] = 0.115714701119; theta[15] = 0.072529857027; theta[16] = 0.088953083931; theta[17] = 0.042129480498; theta[18] = -0.144873349677; theta[19] = -0.372479097706; theta[20] = -0.218044217207; theta[21] = 0.215442671224; theta[22] = -0.510474969315; theta[23] = -0.189202859355; theta[24] = -0.135863550865; theta[25] = -0.313378431029; theta[26] = -0.225243321306; theta[27] = 0.149965991405; theta[28] = -0.519933396747; theta[29] = -0.202880759794; theta[30] = -0.128530783744; theta[31] = 0.033381236106; theta[32] = 0.083123618917; theta[33] = 0.042513771987; theta[34] = 0.049207147074; theta[35] = -0.024553430481; theta[36] = -0.130070734942; theta[37] = 0.05740621284; theta[38] = 0.12158174719; theta[39] = 0.089084966911; theta[40] = 0.106148948262; theta[41] = -0.022050703896; theta[42] = 0.298643686873; theta[43] = 0.313427815532; theta[44] = 0.227738262161; theta[45] = 0.346217621426; theta[46] = 0.107131774322; theta[47] = 0.126520599661; theta[48] = 0.042746484634; theta[49] = 0.198805221431;
                        sigma[0] = 0.815500648157; sigma[1] = 0.860022483796; sigma[2] = 1.090547674642; sigma[3] = 1.214277774353; sigma[4] = 1.035798269369; sigma[5] = 1.02188142802; sigma[6] = 0.88657313097; sigma[7] = 1.147535088899; sigma[8] = 1.066490462319; sigma[9] = 0.840102050414; sigma[10] = 1.029309419816; sigma[11] = 1.057448886925; sigma[12] = 0.821398830738; sigma[13] = 0.840305124951; sigma[14] = 1.09800051924; sigma[15] = 1.145838550057; sigma[16] = 1.000266909076; sigma[17] = 1.025628772046; sigma[18] = 1.478325970419; sigma[19] = 0.907572770006; sigma[20] = 3.127163038156; sigma[21] = 1.327743160605; sigma[22] = 0.905977611252; sigma[23] = 1.742434556935; sigma[24] = 1.340732973025; sigma[25] = 0.780450550634; sigma[26] = 3.33184056699; sigma[27] = 1.56954567579; sigma[28] = 0.87903534215; sigma[29] = 1.750539369462; sigma[30] = 1.367088110925; sigma[31] = 0.64330497691; sigma[32] = 1.139361921135; sigma[33] = 1.255126097425; sigma[34] = 0.821577042167; sigma[35] = 0.87641272077; sigma[36] = 1.028572569205; sigma[37] = 0.668140965124; sigma[38] = 1.367119869987; sigma[39] = 1.790613084726; sigma[40] = 0.96783909736; sigma[41] = 0.777937181089; sigma[42] = 1.487126221687; sigma[43] = 0.884177289213; sigma[44] = 1.530893016458; sigma[45] = 0.880682217556; sigma[46] = 0.880720385975; sigma[47] = 0.811475958675; sigma[48] = 0.87711888546; sigma[49] = 1.076978427203;
                        votes[3] = 0.110435663627 - gauss(x, theta, sigma);
                        theta[0] = -0.041515281491; theta[1] = -0.313859485965; theta[2] = -0.106609031661; theta[3] = 0.164166054098; theta[4] = -0.628329831612; theta[5] = -0.176626616211; theta[6] = 0.031759054137; theta[7] = -0.018338807007; theta[8] = -0.097781192857; theta[9] = 0.045561882841; theta[10] = 0.00714940073; theta[11] = -0.089041748061; theta[12] = -0.019888922004; theta[13] = -0.32343118753; theta[14] = -0.122627049794; theta[15] = 0.149043794999; theta[16] = -0.602686904486; theta[17] = -0.199864731047; theta[18] = -0.034550784268; theta[19] = 0.00995671355; theta[20] = 0.010688992767; theta[21] = -0.031956549133; theta[22] = 0.003571473198; theta[23] = -0.034199571569; theta[24] = -0.037026009123; theta[25] = 0.016995874338; theta[26] = 0.019830390872; theta[27] = -0.031321649846; theta[28] = 0.007013331465; theta[29] = 0.003211953565; theta[30] = 0.046890543705; theta[31] = -0.066095706381; theta[32] = -0.002852640089; theta[33] = -0.010938589483; theta[34] = -0.088543183725; theta[35] = -0.044497199051; theta[36] = 0.0212185624; theta[37] = -0.071433967393; theta[38] = -0.012970892575; theta[39] = -0.031545417639; theta[40] = -0.085206627506; theta[41] = 0.015838045594; theta[42] = 0.364562725193; theta[43] = 0.400632623442; theta[44] = 0.376606125432; theta[45] = 0.421839772389; theta[46] = 0.291341270329; theta[47] = 0.321507810912; theta[48] = 0.310171250736; theta[49] = 0.342967903275;
                        sigma[0] = 1.097013051411; sigma[1] = 1.309459712595; sigma[2] = 1.100029089367; sigma[3] = 1.067459139426; sigma[4] = 1.322601818734; sigma[5] = 0.986463079657; sigma[6] = 1.002117475981; sigma[7] = 0.952496187464; sigma[8] = 1.053224916688; sigma[9] = 1.005818691982; sigma[10] = 0.959619300144; sigma[11] = 1.046978685122; sigma[12] = 1.095823733268; sigma[13] = 1.311181765871; sigma[14] = 1.130863726392; sigma[15] = 1.054194669661; sigma[16] = 1.386321097962; sigma[17] = 1.001676069299; sigma[18] = 1.566706302253; sigma[19] = 2.264066181446; sigma[20] = 0.412102195322; sigma[21] = 1.496332165015; sigma[22] = 1.895411658733; sigma[23] = 1.176358985149; sigma[24] = 1.501585700814; sigma[25] = 2.354978702088; sigma[26] = 0.481478135598; sigma[27] = 1.539834788592; sigma[28] = 1.979929284891; sigma[29] = 1.245708381462; sigma[30] = 1.350954411807; sigma[31] = 2.432521238273; sigma[32] = 0.435476045415; sigma[33] = 1.184188190142; sigma[34] = 2.019218230296; sigma[35] = 1.728331923918; sigma[36] = 1.459917864829; sigma[37] = 2.316902727801; sigma[38] = 0.723678491698; sigma[39] = 1.185584067244; sigma[40] = 2.15301489252; sigma[41] = 1.493097971724; sigma[42] = 1.354908461048; sigma[43] = 1.332185980509; sigma[44] = 1.3880825147; sigma[45] = 1.409931754649; sigma[46] = 1.430684532406; sigma[47] = 1.424669303021; sigma[48] = 1.471364965105; sigma[49] = 1.45909235186;
                        votes[4] = 0.294832826748 - gauss(x, theta, sigma);
                        // return argmax of votes
                        uint8_t classIdx = 0;
                        float maxVotes = votes[0];

                        for (uint8_t i = 1; i < 5; i++) {
                            if (votes[i] > maxVotes) {
                                classIdx = i;
                                maxVotes = votes[i];
                            }
                        }

                        return classIdx;
                    }

                protected:
                    /**
                    * Compute gaussian value
                    */
                    float gauss(float *x, float *theta, float *sigma) {
                        float gauss = 0.0f;

                        for (uint16_t i = 0; i < 50; i++) {
                            gauss += log(sigma[i]);
                            gauss += abs(x[i] - theta[i]) / sigma[i];
                        }

                        return gauss;
                    }
                };
            }
        }
    }